
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diagrama de Flujo v1</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f0f2f5;
    color: #333;
    margin: 0;
    padding: 20px;
    overflow-x: auto; /* Allow horizontal scrolling */
  }
  .container {
    position: relative;
    width: 2400px; /* Increased width to accommodate all categories */
    height: 100vh;
  }
  .draggable {
    position: absolute;
    cursor: move;
    z-index: 10;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
  }
  .draggable:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    transform: translateY(-2px);
  }
  .draggable img {
    display: block;
    width: 150px;
    height: auto;
    border-radius: 8px;
  }
  .leader-line {
    z-index: 5;
  }
  .category {
    position: absolute;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 10px;
    background-color: #f9f9f9;
  }
  .category h2 {
    margin-top: 0;
    font-size: 16px;
    color: #555;
    text-align: center;
  }
</style>
</head>
<body>

<div class="container" id="container">
  <!-- Categoría 1: Secuencia principal -->
  <div class="category" style="left: 20px; top: 20px; width: 1200px; height: 280px;">
    <h2>Categoría 1: Secuencia principal</h2>
    <div id="item-1" class="draggable" style="left: 20px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/1.png" alt="Imagen 1"></div>
    <div id="item-2" class="draggable" style="left: 220px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/2.png" alt="Imagen 2"></div>
    <div id="item-3" class="draggable" style="left: 420px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/3.png" alt="Imagen 3"></div>
    <div id="item-4" class="draggable" style="left: 620px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/4.png" alt="Imagen 4"></div>
    <div id="item-5" class="draggable" style="left: 820px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/5.png" alt="Imagen 5"></div>
    <div id="item-6" class="draggable" style="left: 1020px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/6.png" alt="Imagen 6"></div>
  </div>

  <!-- Categoría 2: Conexiones desde 6 -->
  <div class="category" style="left: 20px; top: 340px; width: 1200px; height: 300px;">
    <h2>Categoría 2: Conexiones desde la imagen 6</h2>
    <div id="item-7" class="draggable" style="left: 20px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/7.png" alt="Imagen 7"></div>
    <div id="item-8" class="draggable" style="left: 220px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/8.png" alt="Imagen 8"></div>
    <div id="item-9" class="draggable" style="left: 420px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/9.png" alt="Imagen 9"></div>
    <div id="item-10" class="draggable" style="left: 620px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/10.png" alt="Imagen 10"></div>
    <div id="item-14" class="draggable" style="left: 820px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/14.png" alt="Imagen 14"></div>
    <div id="item-20" class="draggable" style="left: 1020px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/20.png" alt="Imagen 20"></div>
  </div>

  <!-- Categoría 3: Conexiones desde 10 -->
  <div class="category" style="left: 1250px; top: 20px; width: 400px; height: 300px;">
    <h2>Categoría 3: Conexiones desde la imagen 10</h2>
    <div id="item-11" class="draggable" style="left: 20px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/11.png" alt="Imagen 11"></div>
    <div id="item-12" class="draggable" style="left: 220px; top: 100px;"><img src="PANTALLAS BITCHAT LAST-v1/12.png" alt="Imagen 12"></div>
    <div id="item-13" class="draggable" style="left: 120px; top: 200px; transform: translateX(-50%);"><img src="PANTALLAS BITCHAT LAST-v1/13.png" alt="Imagen 13"></div>
  </div>
  
  <!-- Categoría 4: Conexiones desde 14 -->
  <div class="category" style="left: 1250px; top: 340px; width: 600px; height: 450px;">
    <h2>Categoría 4: Conexiones desde la imagen 14</h2>
    <div id="item-15" class="draggable" style="left: 20px; top: 80px;"><img src="PANTALLAS BITCHAT LAST-v1/15.png" alt="Imagen 15"></div>
    <div id="item-16" class="draggable" style="left: 220px; top: 80px;"><img src="PANTALLAS BITCHAT LAST-v1/16.png" alt="Imagen 16"></div>
    <div id="item-17" class="draggable" style="left: 420px; top: 80px;"><img src="PANTALLAS BITCHAT LAST-v1/17.png" alt="Imagen 17"></div>
    <div id="item-18" class="draggable" style="left: 120px; top: 230px;"><img src="PANTALLAS BITCHAT LAST-v1/18.png" alt="Imagen 18"></div>
    <div id="item-19" class="draggable" style="left: 320px; top: 230px;"><img src="PANTALLAS BITCHAT LAST-v1/19.png" alt="Imagen 19"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/leader-line-new@1.1.9/leader-line.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('container');
    const elements = Array.from(document.getElementsByClassName('draggable'));
    let lines = [];

    function createLines() {
        lines.forEach(line => line.remove());
        lines = [];

        const connections = [
            { from: '#item-1', to: '#item-2' }, { from: '#item-2', to: '#item-3' },
            { from: '#item-3', to: '#item-4' }, { from: '#item-4', to: '#item-5' },
            { from: '#item-5', to: '#item-6' }, { from: '#item-6', to: '#item-7' },
            { from: '#item-6', to: '#item-8' }, { from: '#item-6', to: '#item-9' },
            { from: '#item-6', to: '#item-10' }, { from: '#item-6', to: '#item-14' },
            { from: '#item-6', to: '#item-20' }, { from: '#item-10', to: '#item-11' },
            { from: '#item-10', to: '#item-12' }, { from: '#item-10', to: '#item-13' },
            { from: '#item-14', to: '#item-15' }, { from: '#item-14', to: '#item-16' },
            { from: '#item-14', to: '#item-17' }, { from: '#item-14', to: '#item-18' },
            { from: '#item-14', to: '#item-19' }
        ];

        connections.forEach(conn => {
            const fromElement = document.querySelector(conn.from);
            const toElement = document.querySelector(conn.to);
            if (fromElement && toElement) {
                lines.push(
                    new LeaderLine(fromElement, toElement, {
                        color: 'rgba(0, 0, 0, 0.7)', size: 2, path: 'grid',
                        startSocket: 'bottom', endSocket: 'top', endPlug: 'arrow1'
                    })
                );
            }
        });
    }

    elements.forEach(el => {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        el.onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            e = e || window.event; e.preventDefault();
            pos3 = e.clientX; pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event; e.preventDefault();
            pos1 = pos3 - e.clientX; pos2 = pos4 - e.clientY;
            pos3 = e.clientX; pos4 = e.clientY;
            const parentRect = el.parentNode.getBoundingClientRect();
            const elRect = el.getBoundingClientRect();
            let newTop = el.offsetTop - pos2;
            let newLeft = el.offsetLeft - pos1;

            // Prevent dragging out of parent
            if (newTop < 0) newTop = 0;
            if (newLeft < 0) newLeft = 0;
            if (newTop + elRect.height > parentRect.height) newTop = parentRect.height - elRect.height;
            if (newLeft + elRect.width > parentRect.width) newLeft = parentRect.width - elRect.width;

            el.style.top = newTop + "px";
            el.style.left = newLeft + "px";
            lines.forEach(line => line.position());
        }

        function closeDragElement() {
            document.onmouseup = null; document.onmousemove = null;
        }
    });

    createLines();
});
</script>

</body>
</html>
